<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>2_react生命周期(旧)-1</title>
    <script src="../16.4.react.development.js"></script>
    <script src="../16.4.react-dom.development.js"></script>

    <!-- Don't use this in production: -->
		<script src="../6.15.babel.min.js"></script>
		<script src="../15.6.0.prop-types.js"></script>
 
  </head>
  <body>
		<div id="test"></div>
		<script type="text/babel">
			//创建组件
			//生命周期回调函数 == 生命周期钩子函数 == 生命周期函数 == 生命周期钩子
			class Count extends React.Component{

				//构造器
				constructor(props) {
					console.log('Count---constructor')
					super(props)
					// 初始化状态
					this.state = {count:0}
				}

				//加1按钮的回调
				add = ()=>{
					// 获取原状态
					const {count} = this.state
					// 更新状态
					this.setState({count:count+1})
				}

				//卸载组件
				death = ()=>{
					ReactDOM.unmountComponentAtNode(document.getElementById('test'))
				}

				//强制更新按钮的回调
				force = ()=>{
					this.forceUpdate()
				}

				//组件将要挂载的钩子
				componentWillMount() {
					console.log('Count---componentWillMount')
				}

				//组件挂载完毕的钩子
				componentDidMount() {
					console.log('Count---componentDidMount')
				}

				//组件将要卸载得钩子
				componentWillUnmount(){
					console.log('Count---componentWillMount')
				}

				//控制组件更新的阀门
				shouldComponentUpdate() {
					console.log('Count---shouldComponentUpdate')
					// 必须写一个返回值 只能是Boolean  不写shouldComponentUpdate的话就默认为true
					return true
				}

				//组件将要更新完的钩子
				componentWillUpdate(){
					console.log('Count---componentWillUpdate')
				}

				//组件更新完毕的钩子
				componentDidUpdate(){
					console.log('Count---componentDidUpdate')
				}

				//初始化渲染，状态更新之后
				render() {
					console.log('render')
					const {count} = this.state
					return(
						<div>
							<h2>当前求和为：{count}</h2>
							<button onClick={this.add}>点我+1</button>
							<button onClick={this.death}>卸载组件</button>
							<button onClick={this.force}>不更改任何状态中的数据，强制更新一下</button>
						</div>
					)
				}
			}
			// 渲染组件
			ReactDOM.render(<Count/>,document.getElementById('test'))
		</script>
  </body>
</html>