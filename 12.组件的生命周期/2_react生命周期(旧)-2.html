<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>2_react生命周期(旧)-2</title>
    <script src="../16.4.react.development.js"></script>
    <script src="../16.4.react-dom.development.js"></script>

    <!-- Don't use this in production: -->
		<script src="../6.15.babel.min.js"></script>
		<script src="../15.6.0.prop-types.js"></script>
 
  </head>
  <body>
		<div id="test"></div>
		<script type="text/babel">
			/*
				1.初始化阶段： 由ReactDOM.render() 触发---初始渲染
				        1. constructor()
								2. componentWillMount()
								3. render()
								4. componentDidMount() ========> 常用
								一般再这个钩子中做一些初始化的事，例如：开启定时器、发送网络请求、订阅消息
				2.更新阶段： 由组件内部this.setState() 或父组件render触发
					      1. shouldComponentUpdate()
								2. componentWillUpdate()
								3. render() ========> 必须使用的一个
								4. componentDidUpdate()
				3. 卸载组件： 由ReactDOM.unmountComponentAtNode()触发
								1. componentWillUnmount() ========> 常用
								一般在这个钩子中做一些收尾的事，例如：关闭定时器、取消订阅消息
			*/


			//创建组件
			class A extends React.Component{
				// 初始化状态
				state = {carName:'奔驰'}

				changeCar = ()=>{
					this.setState({carName:'奥托'})
				}

				render(){
					return(
						<div>
							<div>我是A组件</div>
							<button onClick={this.changeCar}>换车</button>
							<B carName={this.state.carName}/>
						</div>
					)
				}
			}

			class B extends React.Component{
				//组件将要接收新的props的钩子
				componentWillReceiveProps(props){
					console.log('B---componentWillReceiveProps',props)
				}

				// 一定要return一个Boolean
				shouldComponentUpdate() {
					console.log('B---shouldComponentUpdate')
					return true
				}

				//组件将要更新完的钩子
				componentWillUpdate(){
					console.log('B---componentWillUpdate')
				}

				//组件更新完毕的钩子
				componentDidUpdate(){
					console.log('B---componentDidUpdate')
				}

				render(){
					return (
						<div>我是B组件，接受到的车是：{this.props.carName}</div>
					)
				}
			}
			// 渲染组件
			ReactDOM.render(<A/>,document.getElementById('test'))
		</script>
  </body>
</html>